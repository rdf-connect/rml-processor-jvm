@prefix sosa: <http://www.w3.org/ns/sosa/>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix sh: <http://www.w3.org/ns/shacl#>.
@prefix rdfc: <https://w3id.org/rdf-connect#>.
@prefix owl: <http://www.w3.org/2002/07/owl#>.

<> owl:imports <./build/plugins/runner-master-SNAPSHOT-index.jar>.
<> owl:imports <../build/libs/rml-processor-0.0.1-all.jar>.
# 
<> owl:imports <./node_modules/@rdfc/file-utils-processors-ts/processors.ttl>.

<> owl:imports <./node_modules/@rdfc/log-processor-ts/processor.ttl>.
<> owl:imports <./node_modules/@rdfc/js-runner/index.ttl>.
#
<> a rdfc:Pipeline;
  rdfc:consistsOf [
    rdfc:instantiates rdfc:JvmRunner;
    rdfc:processor <mapper>;
  ], [
    rdfc:instantiates rdfc:NodeRunner;
    rdfc:processor <mappingReader>,
      <dataReader>,
      <defaultLogger>,
      <targetLogger>;
  ].

<foobarRunner> a rdfc:Runner.
<foobar> a rdfc:Runner.
<mappingData> a rdfc:Reader, rdfc:Writer.
<mappingReader> a rdfc:GlobRead;
  rdfc:glob <./mapping.ttl>;
  rdfc:output <mappingData>;
  rdfc:closeOnEnd "true".

<data> a rdfc:Reader, rdfc:Writer.
<dataReader> a rdfc:GlobRead;
  rdfc:glob <./data.json>;
  rdfc:output <data>;
  rdfc:closeOnEnd "true".

<default> a rdfc:Reader, rdfc:Writer.
<mapper> a rdfc:RmlMapper;
  rdfc:mappings <mappingData>;
  rdfc:source [
    rdfc:triggers true;
    rdfc:reader <data>;
    rdfc:mappingId rdfc:source1;
  ];
  rdfc:target [
    rdfc:writer <target1>;
    rdfc:format "trig";
    rdfc:mappingId rdfc:target1;
  ];
  rdfc:defaultTarget [
    rdfc:writer <default>;
    rdfc:format "trig";
  ].

<targetLogger> a rdfc:LogProcessorJs;
  rdfc:reader <target1>;
  rdfc:level "info";
  rdfc:label "target".

<defaultLogger> a rdfc:LogProcessorJs;
  rdfc:reader <default>;
  rdfc:level "info";
  rdfc:label "default".

